<!DOCTYPE html>
<html lang="en-US">

	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
		<meta name="description" content="CropData's AEFC program is for traders, food processors, exports, stockists, etc, who play the essential role of market makers in the industry and provide the much-needed liquidity through their knowledge and experience." />
		<meta name="keywords" content="CropData, Agriculture Services, Agriculture service providers, Farming services, Krishi, Dr. Krishi, Agriculture E-Marketplace" />
		<meta name="author" content="Sachin Suri - MD, CropData, Designed & Developed by Prakash Patil" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<title>CropData | Ask Question</title>
		<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700;800&display=swap" rel="stylesheet" />
		<!-- Font Awesome -->
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" />
		<link type="text/css" rel="stylesheet" href="/css/jquery.jConveyorTicker.min.css" />
		<link type="text/css" rel="stylesheet" href="/css/ticker-styles.css" />
		<link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" />
		<link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
		<!-- Facebook Meta Tags -->
		<meta property="og:url" content="https://cropdata.in/ask.html" />
		<meta property="og:type" content="website" />
		<meta property="og:title" content="CropData | Ask Question" />
		<meta property="og:description" content="CropData's AEFC program is for traders, food processors, exports, stockists, etc, who play the essential role of market makers in the industry and provide the much-needed liquidity through their knowledge and experience." />
		<meta property="og:image" content="https://cropdata.in/images/og-logo.png" />
		<!-- Twitter Meta Tags -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta property="twitter:domain" content="cropdata.in" />
		<meta property="twitter:url" content="https://cropdata.in/ask.html" />
		<meta name="twitter:title" content="CropData | Ask Question" />
		<meta name="twitter:description" content="CropData's AEFC program is for traders, food processors, exports, stockists, etc, who play the essential role of market makers in the industry and provide the much-needed liquidity through their knowledge and experience." />
		<meta name="twitter:image" content="https://cropdata.in/images/og-logo.png" />
		<!-- IE function that returns browser is Internet Explorer-->
		<script>
			function isIE() {
				ua = navigator.userAgent
				/* MSIE used to detect old browsers and Trident used to newer ones*/
				var is_ie = ua.indexOf('MSIE ') > -1 || ua.indexOf('Trident/') > -1
				return is_ie
			}
			/* Check and redirect to another page */
			if (isIE()) {
				location.replace('compatible-browsers.html')
			}
		</script>
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-176736470-1"></script>
		<script>
			window.dataLayer = window.dataLayer || []

			function gtag() {
				dataLayer.push(arguments)
			}
			gtag('js', new Date())

			gtag('config', 'UA-176736470-1')
		</script>
	</head>

	<body>
		<div id="loading">
			<div id="loading-center">
				<div id="loading-center-absolute">
					<img alt="" src="/images/cropdata-logo-blue.svg" class="img-fluid" />
				</div>
			</div>
		</div>
		<main>
			<section class="banner" style="background-color: #486018">
			</section>
			<!-- <a type="button" class="customModalOpen">modal</a>
				<div class="customModal">
				    <a type="button" class="closeCustomModal" style="display: none;">Close</a>
				</div> -->
			<!-- <section class="contact_location">
				<div class="container text-center py-5">
					<h2 class="section-title text-center mb-3 title-border">Technical Support & Inquiry</h2>
					<div class="about p-0 mb-3">
						<p class="para">Please feel free to contact us if you have any query or issue to connect with us.</p>
					</div>
					<div class="row justify-content-center">
						<div class="col-12 col-sm-12 col-md-3">
							<a href="tel:+917122249901">
								<h1>
									<i class="fas fa-mobile-alt"></i>
								</h1>
								<h5>+91-7122249901 - 06</h5>
							</a>
						</div>
						<div class="col-12 col-sm-12 col-md-3">
							<a href="mailto:info@cropdata.in" target="_blank">
								<h1>
									<i class="fas fa-envelope-open-text"></i>
								</h1>
								<h5>info@cropdata.in</h5>
							</a>
						</div>
					</div>
				</div>
			</section> -->
			<section class="askQuestion">
				<div class="containerdd">
					<div class="conversation">
						<div class="userMsg">
							<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eligendi quidem, necessitatibus voluptate incidunt mollitia quas dolor beatae odio architecto, aspernatur dolores provident aut nihil? Nesciunt non dolor explicabo tempore vero. </p>
							<div class="userDate">10-Feb-2022, Wednesday</div>
						</div>
						<div class="userMsg">
							<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eligendi quidem, necessitatibus voluptate incidunt mollitia quas dolor beatae odio architecto, aspernatur dolores provident aut nihil? Nesciunt non dolor explicabo tempore vero. </p>
							<div class="userDate">10-Feb-2022, Wednesday</div>
						</div>
						<div class="systemMsg">
							<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eligendi quidem, necessitatibus voluptate incidunt mollitia quas dolor beatae odio architecto, aspernatur dolores provident aut nihil? Nesciunt non dolor explicabo tempore vero. </p>
							<div class="ststemDate">10-Feb-2022, Wednesday</div>
						</div>
						<div class="systemMsg">
							<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eligendi quidem, necessitatibus voluptate incidunt mollitia quas dolor beatae odio architecto, aspernatur dolores provident aut nihil? Nesciunt non dolor explicabo tempore vero. </p>
							<div class="ststemDate">10-Feb-2022, Wednesday</div>
						</div>
						<div class="userMsg">
							<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eligendi quidem, necessitatibus voluptate incidunt mollitia quas dolor beatae odio architecto, aspernatur dolores provident aut nihil? Nesciunt non dolor explicabo tempore vero. </p>
							<div class="userDate">10-Feb-2022, Wednesday</div>
						</div>
						<div class="userMsg">
							<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eligendi quidem, necessitatibus voluptate incidunt mollitia quas dolor beatae odio architecto, aspernatur dolores provident aut nihil? Nesciunt non dolor explicabo tempore vero. </p>
							<div class="userDate">10-Feb-2022, Wednesday</div>
						</div>
						<div class="systemMsg">
							<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eligendi quidem, necessitatibus voluptate incidunt mollitia quas dolor beatae odio architecto, aspernatur dolores provident aut nihil? Nesciunt non dolor explicabo tempore vero. </p>
							<div class="ststemDate">10-Feb-2022, Wednesday</div>
						</div>
						<div class="systemMsg">
							<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eligendi quidem, necessitatibus voluptate incidunt mollitia quas dolor beatae odio architecto, aspernatur dolores provident aut nihil? Nesciunt non dolor explicabo tempore vero. </p>
							<div class="ststemDate">10-Feb-2022, Wednesday</div>
						</div>
						<div class="userMsg">
							<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eligendi quidem, necessitatibus voluptate incidunt mollitia quas dolor beatae odio architecto, aspernatur dolores provident aut nihil? Nesciunt non dolor explicabo tempore vero. </p>
							<div class="userDate">10-Feb-2022, Wednesday</div>
						</div>
						<div class="userMsg">
							<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eligendi quidem, necessitatibus voluptate incidunt mollitia quas dolor beatae odio architecto, aspernatur dolores provident aut nihil? Nesciunt non dolor explicabo tempore vero. </p>
							<div class="userDate">10-Feb-2022, Wednesday</div>
						</div>
						<div class="systemMsg">
							<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eligendi quidem, necessitatibus voluptate incidunt mollitia quas dolor beatae odio architecto, aspernatur dolores provident aut nihil? Nesciunt non dolor explicabo tempore vero. </p>
							<div class="ststemDate">10-Feb-2022, Wednesday</div>
						</div>
						<div class="systemMsg">
							<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eligendi quidem, necessitatibus voluptate incidunt mollitia quas dolor beatae odio architecto, aspernatur dolores provident aut nihil? Nesciunt non dolor explicabo tempore vero. </p>
							<div class="ststemDate">10-Feb-2022, Wednesday</div>
						</div>
						<div class="userMsg">
							<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eligendi quidem, necessitatibus voluptate incidunt mollitia quas dolor beatae odio architecto, aspernatur dolores provident aut nihil? Nesciunt non dolor explicabo tempore vero. </p>
							<div class="userDate">10-Feb-2022, Wednesday</div>
						</div>
						<div class="userMsg">
							<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eligendi quidem, necessitatibus voluptate incidunt mollitia quas dolor beatae odio architecto, aspernatur dolores provident aut nihil? Nesciunt non dolor explicabo tempore vero. </p>
							<div class="userDate">10-Feb-2022, Wednesday</div>
						</div>
						<div class="systemMsg">
							<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eligendi quidem, necessitatibus voluptate incidunt mollitia quas dolor beatae odio architecto, aspernatur dolores provident aut nihil? Nesciunt non dolor explicabo tempore vero. </p>
							<div class="ststemDate">10-Feb-2022, Wednesday</div>
						</div>
						<div class="systemMsg">
							<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Eligendi quidem, necessitatibus voluptate incidunt mollitia quas dolor beatae odio architecto, aspernatur dolores provident aut nihil? Nesciunt non dolor explicabo tempore vero. </p>
							<div class="ststemDate">10-Feb-2022, Wednesday</div>
						</div>
					</div>
					<!-- <input type="text" class="form-control" placeholder="Text..."> -->
					<div class="container-fluid" style="position: sticky;bottom: 0;	background-color: white;">
						<form class="row" id="userMsgForm">
							<div class="col-12 w-100 p-0" style="position: relative;">
								<textarea class="form-control " id="userMsg" name="userMsg" style="overflow-y: auto;max-height: 400px !important;" rows="2" placeholder="Type..." required></textarea>
								<div class="div" style="position: absolute;bottom: -20px;right: 0;background-color: rgb(0 0 0 / 16%);padding: 1px 10px;font-size: 12px;">
									<span id="rchars">600</span> Character(s) Remaining
								</div>
							</div>
							<div class="col-12 my-2">
								<div class="row align-items-center">
									<div class="col-12">
										<div class="imgSection"></div>
									</div>
									<div class="col-auto">
										<input type="submit" class="btn btn-primary btn-lg" style="background-color: #2935e8; color: #ffffff;" value="Send">
									</div>
									<div class="col-auto pr-0">
										<label style="font-size: 18px; margin: 0; cursor: pointer;" title="Attached File">
											<i class="fas fa-paperclip"></i>
											<input type="file" id="userDocumentsUpload" name="userDocumentsUpload" accept=".pdf,.doc,.docx" multiple style="display:none">
										</label>
									</div>
									<div class="col-auto pr-0">
										<label style="font-size: 20px; margin: 0; cursor: pointer;" title="Attached Image">
											<i class="far fa-image"></i>
											<input type="file" id="userImageUpload" name="userImageUpload" accept=".png,.jpg,.jpeg" multiple style="display:none">
										</label>
									</div>
								</div>
							</div>
						</form>
					</div>
					<!-- <div class="messageBoxReply"></div> -->
				</div>
			</section>
			<!-- <a id="back-to-top" class="btn btn-light btn-lg back-to-top" role="button" style="bottom: 70px;"><i class="fas fa-chevron-up"></i></a> -->
		</main>
		<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
		<script src="/js/main.js" type="text/javascript"></script>
		<script type="text/javascript" src="/js/ajax-loading.js"></script>
		<link href="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap-switch-button@1.1.0/css/bootstrap-switch-button.min.css" rel="stylesheet">
		<script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap-switch-button@1.1.0/dist/bootstrap-switch-button.min.js"></script>
		<script>
			function successMsgBox(msg, time) {

				if (time == undefined) {
					time = 6000;
				}

				if (msg != "") {
					// alert("Failed to submit the form");
					setTimeout(function () {
						$(".successMsgBox").append(msg).show();
						if (
							$('.successMsgBox:contains("' + msg + '")').length > 0
						) {
							$(".successMsgBox").empty();
							$(".successMsgBox").append(msg).show();
						}
					}, 0);
					setTimeout(function () {
						$(".successMsgBox").empty().hide();
					}, time);
				}
			}

			function errorMsgBox(msg, time) {

				if (time == undefined) {
					time = 6000;
				}

				if (msg != "") {
					// alert("Failed to submit the form");
					setTimeout(function () {
						$(".errorMsgBox").append(msg).show();
						if (
							$('.errorMsgBox:contains("' + msg + '")').length > 0
						) {
							$(".errorMsgBox").empty();
							$(".errorMsgBox").append(msg).show();
						}
					}, 0);
					setTimeout(function () {
						$(".errorMsgBox").empty().hide();
					}, time);
				}
			}



			function requestUserData(userId) {
				var decodeUserId = atob(userId);
				// $.ajax({
				// 	url: 'http://192.168.0.64:8000/userData/' + decodeUserId,
				// 	type: 'GET',
				// 	contentType: 'application/json; charset=utf-8',
				// 	dataType: 'json',
				// 	async: true,
				// 	beforeSend: function (xhr) {
				// 	},
				// 	success: function (response) {
				// 		console.log(response)
				// 	},
				// 	error: function (request, error) {
				// 		alert("Request: " + JSON.stringify(request));
				// 	}
				// });
			}



			var imagesPreview = function (input, placeToInsertImagePreview) {
				if (input.files) {
					var filesAmount = input.files.length;

					for (i = 0; i < filesAmount; i++) {
						var reader = new FileReader();

						reader.onload = function (event) {
							$($.parseHTML('<img>')).attr('src', event.target.result).appendTo(placeToInsertImagePreview);
						}

						reader.readAsDataURL(input.files[i]);
					}
				}

			};

			$('#userImageUpload').on('change', function () {
				$('.imgSection').html('');
				imagesPreview(this, 'div.imgSection');
			});



			$(document).ready(function () {

				const urlParams = new URLSearchParams(window.location.search);

				var user = urlParams.get('user');

				if (user != "" && user != undefined) {
					requestUserData(user);
				} else {
					console.log('no user found');
				}

				const tx = $("#userMsgForm #userMsg");
				for (let i = 0; i < tx.length; i++) {
					tx[i].setAttribute("style", "max-height:200px !important;resize: none;height:" + (tx[i].scrollHeight) + "px;overflow-y:auto;");
					tx[i].addEventListener("input", OnInput, false);
				}

				function OnInput() {
					this.style.height = "auto";
					this.style.height = (this.scrollHeight) + "px";
				}



				var maxLength = 600;
				$('#userMsg').keyup(function () {
					var textlen = maxLength - $(this).val().length;
					$('#rchars').text(textlen);
				});
				$('#userMsg').prop('maxlength', '600')


				$('#userMsgForm').submit(function (event) {
					event.preventDefault();
					var formData = new FormData($('#userMsgForm')[0]);

					formData.delete('userDocumentsUpload');
					formData.delete('userImageUpload');

					$.each($('input[type="file"]'), function (i, obj) {
						fileNames = $(this).attr('name')
						$.each(obj.files, function (j, file) {
							formData.append(fileNames + '[' + j + ']', file)
						})
					})


					$.ajax({
						url: 'http://192.168.0.64:8000/conversation',
						type: 'POST',
						data: formData,
						cache: false,
						contentType: false,
						processData: false,
						enctype: 'multipart/form-data',
						beforeSend: function (xhr) {
						},
						success: function (response) {
							console.log(response);



						},
						error: function (request, error) {
							alert("Request: " + JSON.stringify(request));

							var app = `<div class="userMsg">
								<p>`+ $('#userMsg').val() + `</p>
								<div class="userDate">10-Feb-2022, Wednesday</div>
								<div class="serverImgSection"><img src="https://cropdata.in/images/franchise-banner.jpg" class="img-fluid"></div>
							</div>`;

							console.log($('.imgSection').html())

							$('.conversation').append(app);
							$('.imgSection').html('');
							$('#userMsgForm')[0].reset();
						}
					});

				});

			});
		</script>
	</body>

</html>