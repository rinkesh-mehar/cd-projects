<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="shortcut icon" href="https://dev.cropdata.in/images/favicon.ico" type="image/x-icon">
    <title>CropData | Agriota Registration</title>
    <meta name="description" content="CropData's AEFC program is for traders, food processors, exports, stockists, etc, who play the essential role of market makers in the industry and provide the much-needed liquidity through their knowledge and experience.">
    <meta name="keywords" content="CropData, Agriculture Services, Agriculture service providers, Farming services, Krishi, Dr. Krishi, Agriculture E-Marketplace">
    <meta name="author" content="Sachin Suri - MD, CropData, Designed & Developed by Prakash Patil">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <!-- Facebook Meta Tags -->
    <meta property="og:url" content="https://cropdata.in/agriota-user.html">
    <meta property="og:type" content="website">
    <meta property="og:title" content="CropData | Agriota Registration">
    <meta property="og:description" content="CropData's AEFC program is for traders, food processors, exports, stockists, etc, who play the essential role of market makers in the industry and provide the much-needed liquidity through their knowledge and experience.">
    <meta property="og:image" content="https://cropdata.in/images/og-logo.png">

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="cropdata.in">
    <meta property="twitter:url" content="https://cropdata.in/agriota-user.html">
    <meta name="twitter:title" content="CropData | Agriota Registration">
    <meta name="twitter:description" content="CropData's AEFC program is for traders, food processors, exports, stockists, etc, who play the essential role of market makers in the industry and provide the much-needed liquidity through their knowledge and experience.">
    <meta name="twitter:image" content="https://cropdata.in/images/og-logo.png">


    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700;800&display=swap" rel="stylesheet" />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" />
    <link type="text/css" rel="stylesheet" href="css/jquery.jConveyorTicker.min.css" />
    <link type="text/css" rel="stylesheet" href="css/ticker-styles.css" />
    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/main.css" />

    <!-- IE function that returns browser is Internet Explorer-->
    <script>
        function isIE() {
            ua = navigator.userAgent;
            /* MSIE used to detect old browsers and Trident used to newer ones*/
            var is_ie = ua.indexOf("MSIE ") > -1 || ua.indexOf("Trident/") > -1;
            return is_ie;
        }
        /* Check and redirect to another page */
        if (isIE()) {
            location.replace("compatible-browsers.html");
        }
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-176736470-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-176736470-1');
    </script>

</head>

<body>
    <div id="loading">
        <div id="loading-center">
            <div id="loading-center-absolute">
                <img alt="" src="images/cropdata-logo-blue.svg" class="img-fluid" />
            </div>
        </div>
    </div>
    <main>
        <header id="js-header">
            <div class="container menu-bar-container">
                <div class="row align-items-center">
                    <div class="col-12 col-sm-12 col-md-2 col-lg-2 col-xl-2 logo-section">
                        <a href="index.html" class="home-logo"><img alt="" src="images/cropdata-logo-white.svg" class="img-fluid" /></a>
                        <a href="index.html" class="other-logo"><img alt="" src="images/cropdata-logo-blue.svg" class="img-fluid" /></a>
                        <a class="btn btn-primary nav-toggle"><i class="fas fa-bars"></i></a>
                    </div>
                    <div class="col-12 col-sm-12 col-md-10 col-lg-10 col-xl-10 menu-bar">
                        <ul class="nav-menu">
                            <li><a href="index.html">Home</a></li>
                            <li><a href="about.html">About Us</a></li>
                            <li class="submenu_parent">
                                <a class="mouse-pointer">Platforms <i class="fa fa-angle-down" aria-hidden="true"></i></a>
                                <ul class="submenu">
                                    <li><a href="dr-krishi.html">Dr. Krishi</a></li>
                                    <li><a href="agdata.html">AgData</a></li>
                                    <li><a href="agriota.html">Agriota</a></li>
                                    <li><a href="krishiCo.html">KrishiCo</a></li>
                                </ul>
                            </li>
                            <li><a href="products.html">Products & Services</a></li>
                            <li><a href="partners.html">Partners</a></li>
                            <li class="submenu_parent">
                                <a class="mouse-pointer">CropData <i class="fa fa-angle-down" aria-hidden="true"></i></a>
                                <ul class="submenu">
                                    <li><a href="news.html">News</a></li>
                                    <li><a href="csr.html">CSR</a></li>
                                    <li><a href="agriota.html#agriota-commodity" data-offset="180">Commodities</a></li>
                                    <li><a href="market-data.html">Market Data</a></li>
                                    <li><a href="career.html">Careers</a></li>
                                    <li><a href="contact.html">Contact</a></li>
                                    <li><a href="agriota-user.html">Join Us</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </header>

        <section class="banner" style="background-color: #486018;">
            <picture>
                <source srcset="images/franchise-banner.jpg" media="(min-width: 1024px)" class="img-fluid" />
                <source srcset="images/franchise-banner-medium.jpg" media="(min-width: 400px)" class="img-fluid" />
                <source srcset="images/franchise-banner-small.jpg" media="(min-width: 230px)" class="img-fluid" />
                <img alt="" src="images/franchise-banner.jpg" width="100%" class="img-fluid" />
            </picture>
        </section>

        <section class="partners">
            <div class="container py-5">
                <h2 class="section-title text-center title-border">
                    Agriota E-Marketplace Facilitation Center (AEFC) Programs
                </h2>
                <p class="text-justify">
                    CropData's AEFC program is for traders, food processors, exporters, stockists, etc, who play the essential role of market makers in the industry and provide the much-needed liquidity through their knowledge and experience. CropData members could trade
                    for themselves or for others and even act as aggregators for others. Being a neutral party, CropData doesn't trade for itself and sees its partners as commodities experts and leverages their expertise to drive the buy-side ecosystem,
                    while providing them end-to-end services for a holistic experience.
                </p>
            </div>
        </section>

        <section class="partner-form-container application-Form">
            <div class="container">
                <div class="row">
                    <div class="franchise-form-box formWhiteBox col-12">
                        <div class="row">
                            <div class="col-12 col-md-12 col-lg-6 col-xl-6 buyerRegistrationSection">
                                <div class="formWhiteBox">
                                    <h4 class="title title-border">Registration Form</h4>
                                    <!-- <p>(<span style="color: #ff1100;">*</span>) Indicates required field. Please feel free to contact us if you have any query.</p> -->
                                    <form action="" method="POST" enctype="multipart/form-data" class="Pre-Application-box" id="buyerRegistrationForm" novalidate>
                                        <!-- <div class="form-group" title="Nature of Business">
                                            <label for="natureOfBusiness">Nature of Business <span class="required">*</span></label>
                                            <div class="custom-control custom-radio custom-control-inline">
                                                <input class="custom-control-input natureOfBusiness" type="radio" name="natureOfBusiness" id="natureOfBusinessAgriculture" checked="" value="Agriculture" required="">
                                                <label class="custom-control-label" for="natureOfBusinessAgriculture">Agriculture</label>
                                            </div>
                                            <div class="custom-control custom-radio custom-control-inline">
                                                <input class="custom-control-input natureOfBusiness" type="radio" name="natureOfBusiness" id="natureOfBusinessNonAgriculture" value="Non-Agriculture">
                                                <label class="custom-control-label" for="natureOfBusinessNonAgriculture">Non-Agriculture</label>
                                            </div><br>
                                        </div> -->
                                        <input type="hidden" id="referralcode" name="referralcode">
                                        <div class="form-group" title="Company Name">
                                            <label for="companyName">Company Name <span class="required">*</span></label>
                                            <input type="text" class="form-control" id="companyName" maxlength="45" name="companyName" placeholder="Please enter company name">
                                        </div>
                                        <div class="form-group" title="Email Address">
                                            <label for="email">Email Address <span class="required">*</span></label>
                                            <input type="email" maxlength="100" class="form-control" name="email" id="email" placeholder="email@address.com">
                                        </div>
                                        <div class="form-group" title="Country">
                                            <label for="country">Country <span class="required">*</span></label>
                                            <div style="position: relative;">
                                                <input type="text" class="form-control" id="country" maxlength="45" name="country" placeholder="Please enter country name" autocomplete="nope">
                                                <div class="countryList">
                                                    <a type="button" data-id=""></a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group" title="Please enter mobile no. without ISD/country code">

                                            <label for="mobileNo">Mobile Number <span class="required">*</span></label>
                                            <div class="d-flex w-100">
                                                <div class="col-auto form-group m-0 p-0">
                                                    <select class="custom-select w-auto" id="mobileNoCountryCode" name="mobileNoCountryCode" style="width: fit-content;max-width: fit-content;"></select>
                                                </div>
                                                <div class="col form-group m-0 w-auto p-0">
                                                    <!-- <span class="input-group-text" id="mobileNoCountryCode" style="font-size: 0.875rem; border-radius: 0;"></span> -->
                                                    <input type="number" onkeypress="if(this.value.length==15) return false;" onkeyup="this.value=this.value.replace(/\b0+/g, '')" class="form-control" name="mobileNo" id="mobileNo" placeholder="Please enter mobile no. without ISD code">
                                                </div>
                                            </div>
                                            <span for="mobileNo" class="help-block col-12 p-0"></span>
                                        </div>

                                        <!-- <div class="form-group col-12 col-sm-12 col-md-12 col-lg-4 col-xl-4" title="Mobile Number">
                                            <label for="directorsProprietorPartnerMobileNo[0]">Mobile Number <span class="required">*</span></label>
                                            <div class="input-group">
                                                <div class="form-group m-0">
                                                    <input type="text" class="form-control w-auto mobPrefix" id="directorsProprietorPartnerMobileNoPrefix[0]" name="directorsProprietorPartnerMobileNoPrefix[0]" autocomplete="nope" style="width: fit-content;max-width: 53px;border-top-left-radius: 0.25rem; border-top-right-radius: 0; border-bottom-right-radius: 0; border-bottom-left-radius: 0.25rem;"
                                                        data-rule-required="true" data-msg-required="Please Enter Country Code.">
                                                </div>
                                                <input type="number" class="form-control mobNumber" onkeypress="if(this.value.length==15) return false;" aria-describedby="directorsProprietorPartnerMobileNoPrefix[0]" name="directorsProprietorPartnerMobileNo[0]" id="directorsProprietorPartnerMobileNo[0]"
                                                    placeholder="Please enter mobile no." data-rule-required="true" data-msg-required="Please Enter Mobile No.">
                                            </div>
                                        </div> -->
                                        <!--Submit-->
                                        <div class="form-group">
                                            <input type="submit" id="buyerRegistrationFormBtn" value="Sign Up" class="btn btn-primary btn-lg" />
                                        </div>
                                    </form>
                                </div>
                            </div>

                            <div class="col-12 col-md-12 col-lg-6 col-xl-6 buyerLoginSection d-flex">
                                <div class="formWhiteBox" style="align-self: center;box-shadow: 0 0 10px rgb(0 0 0 / 30%);border-radius: 10px;border: solid 3px rgba(255, 255, 255, 0.1);padding: 30px;">
                                    <h4 class="title title-border">Sign In</h4>
                                    <form action="" method="POST" enctype="multipart/form-data" class="Pre-Application-box" id="buyerLoginForm" novalidate>
                                        <div class="form-group loginMobileNoField" title="Please enter mobile no. without ISD/country code">
                                            <label for="loginMobileNo">Mobile Number <span class="required">*</span></label>
                                            <input type="number" onkeypress="if(this.value.length==15) return false;" onkeyup="this.value=this.value.replace(/\b0+/g, '')" class="form-control" name="loginMobileNo" id="loginMobileNo" placeholder="Please enter mobile no. without ISD code">

                                        </div>
                                        <div class="form-group loginOtpField" title="Enter OTP">
                                            <label for="loginOtp">OTP <span class="required">*</span></label>
                                            <input type="number" onkeypress="if(this.value.length==4) return false;" class="form-control" name="loginOtp" id="loginOtp" placeholder="Enter OTP">

                                        </div>
                                        <!--Submit-->
                                        <div class="form-group d-flex justify-content-between align-items-center m-0">
                                            <input type="submit" id="buyerLoginFormBtn" value="Send OTP" class="btn btn-primary btn-lg" />
                                            <button id="resendOtp" class="btn btn-primary btn-md" style="display: none;"><i class="fas fa-redo-alt"></i> <span>Resend OTP</span></button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <section class="career-contact">
            <div class="container text-center py-5">
                <h2 class="section-title text-center mb-3 title-border">Technical Support & Inquiry</h2>
                <div class="about p-0 mb-3">
                    <p class="para">Please feel free to contact us if you have any query or issue to connect with us.</p>
                </div>
                <div class="row justify-content-center">
                    <div class="col-12 col-sm-12 col-md-3">
                        <a href="tel:+917122249901">
                            <h1>
                                <i class="fas fa-mobile-alt"></i>
                            </h1>
                            <h5>+91-7122249901 - 06</h5>
                        </a>
                    </div>
                    <div class="col-12 col-sm-12 col-md-3">
                        <a href="mailto:info@cropdata.in" target="_blank">
                            <h1>
                                <i class="fas fa-envelope-open-text"></i>
                            </h1>
                            <h5>info@cropdata.in</h5>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <div class="modal fade show" id="formModalMsg" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="formModalMsgLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Registration Form Status</h4>
                        <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
                    </div>
                    <div class="modal-body p-4"></div>
                    <div class="modal-footer justify-content-between"></div>
                </div>
            </div>
        </div>
        <a id="back-to-top" class="btn btn-light btn-lg back-to-top" role="button"><i class="fas fa-chevron-up"></i></a>
        <footer></footer>
    </main>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

    <!--
    <script type="text/javascript" src="js/jquery.vticker-min.js"></script>
    -->


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>


    <style>
        .datepicker table {
            font-size: 14px !important;
        }
        
        #averageRevenueLastThreeYears-error {
            float: right;
        }
        
        .averageRevenueLastThreeYearsError .help-block:first-of-type {
            float: right;
            margin-top: 5px;
        }
    </style>
    <script>
        $('#dateOfRegistration').datepicker({
            format: 'yyyy/mm/dd',
            todayHighlight: true,
            // autoclose: true,
        });

        $('#yearOfEstablishment').datepicker({
            minViewMode: 2,
            format: 'yyyy',
            endDate: '-0d',
            todayHighlight: true,
            // autoclose: true,
        });
    </script>

    <script src="js/main.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/ajax-loading.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>

    <script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>
    <script>
        function showMessage(msg, time) {

            if (time == undefined) {
                time = 3000;
            }

            if (msg != "") {
                // alert("Failed to submit the form");
                setTimeout(function() {
                    $(".msg-box").append(msg).show();
                    if (
                        $('.msg-box:contains("' + msg + '")').length > 0
                    ) {
                        $(".msg-box").empty();
                        $(".msg-box").append(msg).show();
                    }
                }, 0);
                setTimeout(function() {
                    $(".msg-box").empty().hide();
                }, time);
            }
        }

        //Timer function for resend otp
        function timer(time) {
            $('#resendOtp').show();
            var timer2 = time;
            // var timer2 = '0:10';
            var interval = setInterval(function() {
                var timer = timer2.split(':');
                //by parsing integer, I avoid all extra string processing
                var minutes = parseInt(timer[0], 10);
                var seconds = parseInt(timer[1], 10);
                --seconds;
                minutes = (seconds < 0) ? --minutes : minutes;
                if (minutes < 0) clearInterval(interval);
                seconds = (seconds < 0) ? 59 : seconds;
                seconds = (seconds < 10) ? '0' + seconds : seconds;
                minutes = (minutes < 10) ? minutes : minutes;
                // $('.buyerLoginFormBtn').html(minutes + ':' + seconds);
                timer2 = minutes + ':' + seconds;

                if (timer2 == '-1:59') {
                    $('#resendOtp span').html('RESEND OTP');
                    $('#resendOtp').removeAttr("disabled");
                } else {
                    $('#resendOtp span').html('RESEND OTP ( ' + timer2 + ')');
                    $('#resendOtp').prop("disabled", true);
                }
            }, 1000)
        };

        var repeatTask = 'Yes';

        function checkUserStatus(userMobileNo, userEmail) {
            $.ajax({
                type: "GET",
                url: aefcBaseUrl + "/emailVerified?mobileNo=" + userMobileNo + "&email=" + userEmail,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: true,
                beforeSend: function(xhr) {
                    //
                },
                success: function(response) {
                    if (response.emailStatus == 'Yes') {
                        repeatTask = 'No';
                        // $('.loginPopupBtn').removeClass('disabled').attr('href', '/agriota-user.html');
                        $('.loginPopupBtn').removeClass('disabled').attr('type', 'button');
                        $('.buyerRegistrationSection').addClass('disabled');

                    } else {
                        $('.loginPopupBtn').addClass('disabled').removeAttr('href');
                    }
                },
                error: function(xhr, textStatus, errorThrown) {
                    //
                },
            });
        };

        $(document).ready(function() {
            // Loader
            var loading = $.loading();
            $('.loginOtpField').hide();

            $('#loginMobileNo').on('focusin', function() {
                $('.inputMsg').show();
            });

            $('#loginMobileNo').on('focusout', function() {
                $('.inputMsg').hide();
            });




            $("body").on('click', '.loginPopupBtn:not(.disabled)', function() {
                $('.buyerRegistrationSection').addClass('disabled');
                $('#formModalMsg').modal('hide');
                $('#loginMobileNo').val($('#mobileNo').val());
                $('#buyerRegistrationForm').reset();
            });

            $("body").on('click', '.checkMailBox', function() {
                //open new window of user's email-address domain
                if ($("#email").val() != '') {
                    var userEmail = $("#email").val();
                    var emailClientName = userEmail.substr(userEmail.indexOf("@") + 1)

                    if (emailClientName == 'gmail.com') {
                        window.open('https://mail.google.com/mail/u/0/#search/Thank+You+for+Registering+with+CropData', '_blank');

                    } else if (emailClientName == 'yahoo.com') {
                        window.open('https://mail.yahoo.com/d/search/keyword=Thank%2520You%2520for%2520Registering%2520with%2520CropData', '_blank');

                    } else if (emailClientName == 'outlook.com' || emailClientName == 'live.com' || emailClientName == 'hotmail.com') {
                        window.open('https://outlook.live.com', '_blank');

                    } else if (emailClientName == 'aol.com') {
                        window.open('https://mail.aol.com', '_blank');

                    } else if (emailClientName == 'rediffmail.com') {
                        window.open('https://mail.rediff.com/cgi-bin/login.cgi', '_blank');

                    } else {
                        console.log('Other email client name found')
                    }
                }
            });

            //ipapi api call
            $.get("https://ipapi.co/json", function(response) {
                var va = response.country_name + " (" + response.country_code + ")";
                $('#country').val(va).attr('data-value', response.country_code);
                $('#mobileNoCountryCode').html('');
                if (response.country_calling_code != undefined && response.country_calling_code != null) {
                    var codes = response.country_calling_code.split(',');
                    for (x in codes) {
                        $('#mobileNoCountryCode').append('<option selected value="' + (codes[x].trim()) + '">' + (codes[x].trim()) + '</option>');
                    }
                }
            });

            // Country List
            $("body").on('click', '.countryList a', function() {
                $("#country").attr('data-value', $(this).attr('data-id')).val($(this).text()).focus();
                $("#country").focusout();
                $('#mobileNoCountryCode').html('');
                if ($(this).attr('data-countrycode') != undefined && $(this).attr('data-countrycode') != null) {
                    // $('#mobileNoCountryCode').html('+' + $(this).attr('data-countrycode'));
                    var codes = $(this).attr('data-countrycode').split(',');
                    for (x in codes) {
                        $('#mobileNoCountryCode').append('<option selected value="+' + (codes[x].trim()) + '">+' + (codes[x].trim()) + '</option>');
                    }
                }
                $(this).parent().hide();
            });

            // $('body').on('click', '.closeDiv', function() {
            //     $(this).parent().hide();
            // });

            $('body').on('click', function(event) {
                if (!$(event.target).closest('.countryList').length) {
                    $('.countryList').hide();
                }
            });

            $('#country').on('blur', function() {
                // $('.countryList').hide();
                if ($(this).attr('data-value') == '' || $(this).attr('data-value') == null) {
                    $(this).val('');
                }
            });
            $('#country').on('keyup', function() {
                var searchParam = $(this).val();
                $(this).attr('data-value', '');
                $('#mobileNoCountryCode').html('');
                $.ajax({
                    url: baseUrl + '/search/countries?countries=' + searchParam,
                    type: 'GET',
                    dataType: 'json',
                    beforeSend: function(xhr) {
                        loading.open();
                        $('.countryList').hide();
                    },
                    success: function(data) {
                        var dropdownValue = ''
                        $.each(data, function(index, value) {
                            value.name = value.name.replace('\r', '');
                            value.name = value.name.replace('\n', ' ');
                            if (value.countryCode != null && value.countryCode != '') {
                                dropdownValue += `<a type="button" data-countrycode="${value.countryCode}" data-id="${value.code}">${value.name}</a>`;
                            }
                        });

                        $('.countryList').html(dropdownValue).show();

                        loading.close()
                    },

                    error: function(xhr, textStatus, errorThrown) {
                        loading.close()
                            // console.log('Error in Database');
                    },
                });
            });

            // Resend otp request
            $("#resendOtp").on('click', function() {
                var data = {
                    loginMobileNo: $("#loginMobileNo").val(),
                    loginOtp: $("#loginOtp").val(),
                };
                $.ajax({
                    type: "POST",
                    url: aefcBaseUrl + "/validateOTP",
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify(data),
                    dataType: "json",
                    async: true,
                    beforeSend: function(xhr) {
                        loading.open();
                        $("#resendOtp").hide();
                    },
                    success: function(response) {
                        if (response.status == true) {
                            timer(response.expiredTime);
                            showMessage(response.message, 10000);
                        } else {
                            showMessage(response.message, 10000);
                            $("#resendOtp").show();
                        }
                    },
                    error: function(xhr, textStatus, errorThrown) {
                        loading.close();
                        $("#resendOtp").show();
                        showMessage(xhr.responseJSON.error);
                    },
                });
            });

            var key, mob, email = '';
            const urlParams = new URLSearchParams(window.location.search);

            if (urlParams != "") {
                key = urlParams.get('key');
                email = urlParams.get('email');
                mob = urlParams.get('mob');
                referralcode = urlParams.get('referralcode');
                if (referralcode != "" && referralcode != undefined) {
                    $('#referralcode').val(referralcode);

                } else if (key != "" && email != "" && mob != "" && key != null && email != null && mob != null) {
                    // Get user details from Key

                    console.log(key, email, mob)
                    $.ajax({
                        type: "GET",
                        url: aefcBaseUrl + '/verify-email/' + key,
                        // url: "/agriota-user/email-verification.json",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        async: true,
                        beforeSend: function(xhr) {
                            loading.open();
                        },
                        success: function(response) {
                            loading.close();
                            if (response.status != undefined && response.status == true) {
                                $('#loginMobileNo').val(mob);
                                $('.buyerRegistrationSection').addClass('disabled');
                            } else {
                                document.location.href = "/agriota-user.html";
                            }
                        },
                        error: function(xhr, textStatus, errorThrown) {
                            loading.close();
                            showMessage(xhr.responseJSON.error);
                        },
                    });
                } else {
                    document.location.href = "/agriota-user.html";
                }
            }

            // Form validator
            $.validator.addMethod(
                "mobileNoRegex",
                function(value, element, regexp) {
                    if (regexp.constructor != RegExp)
                        regexp = new RegExp(regexp);
                    else if (regexp.global)
                        regexp.lastIndex = 0;
                    return this.optional(element) || regexp.test(value);
                }, "Please Enter Valid Mobile Number."
            );

            // override jquery validate plugin defaults
            $.validator.setDefaults({

                highlight: function(element) {
                    $(element).closest(".form-group").addClass("has-error");
                },
                unhighlight: function(element) {
                    $(element).closest(".form-group").removeClass("has-error");
                },
                errorElement: "span",
                errorClass: "help-block",
                errorPlacement: function(error, element) {
                    if (
                        element.parent(".input-group").length ||
                        element.parent().parent(".input-group").length
                    ) {
                        error.insertAfter(element.closest(".input-group"));
                    } else if (element.parent(".input-group").length) {
                        error.insertAfter(element.parent());
                    } else if (
                        element.prop("type") === "radio" &&
                        element.parent(".radio-inline").length
                    ) {
                        error.insertAfter(element.parent().parent());
                    } else if (
                        element.prop("type") === "checkbox" ||
                        element.prop("type") === "radio"
                    ) {
                        error.appendTo(element.parent().parent());
                    } else {
                        error.insertAfter(element);
                    }
                },
                submitHandler: function(element) {

                    if (element.id == 'buyerRegistrationForm') {

                        // Registation form submit
                        $.ajax({
                            type: "POST",
                            url: aefcBaseUrl + "/register-buyer",
                            // url: "http://192.168.0.50:8080/site/agriota-user/add",
                            contentType: "application/json; charset=utf-8",
                            data: JSON.stringify({
                                parentReferralCode: $("#referralcode").val(),
                                companyName: $("#companyName").val(),
                                mobileNumber: $("#mobileNo").val(),
                                emailAddress: $("#email").val(),
                                countryCode: $("#country").data('value'),
                                isdCode: $("#mobileNoCountryCode").val(),
                            }),
                            dataType: "json",
                            async: true,
                            beforeSend: function(xhr) {
                                loading.open();
                                $("#buyerRegistrationFormBtn").hide();
                                $("#formModalMsg .modal-body").empty();
                            },
                            success: function(response) {

                                if (response.status == true) {
                                    var mob = $('#mobileNo').val();
                                    var email = $('#email').val();

                                    var emailClientName = email.substr(email.indexOf("@") + 1).toLowerCase();
                                    var img = '';

                                    if (emailClientName == 'gmail.com') {
                                        img = "<img src='/images/gmail-icon.svg' style='width: 20px;margin-right: 5px;'>";

                                    } else if (emailClientName == 'yahoo.com') {
                                        img = "<img src='/images/yahoo-mail-icon.svg' style='width: 20px;margin-right: 5px;'>";

                                    } else if (emailClientName == 'rediffmail.com') {
                                        img = "<img src='/images/rediffmail.svg' style='width: 20px;margin-right: 5px;'>";

                                    } else if (emailClientName == 'aol.com') {
                                        img = "<img src='/images/aol-icon.svg' style='width: 20px;margin-right: 5px;'>";

                                    } else if (emailClientName == 'outlook.com' || emailClientName == 'live.com' || emailClientName == 'hotmail.com') {
                                        img = "<img src='/images/outlook-icon.svg' style='width: 20px;margin-right: 5px;'>";
                                    }

                                    if (emailClientName != 'gmail.com' && emailClientName != 'yahoo.com' && emailClientName != 'outlook.com' && emailClientName != 'live.com' && emailClientName != 'hotmail.com' && emailClientName != 'rediffmail.com') {
                                        $("#formModalMsg .modal-body").html('Thank you for registering with us. <br>Please check your email <b>(Inbox or Promotions)</b> &amp; press the <a type="button">click here</a> button to verify your email address.');
                                        $("#formModalMsg .modal-footer").html('<div class="mailPopupWindow w-100"><div class="otherMailAddress"><a href="https://mail.google.com/mail/u/0/#search/Thank+You+for+Registering+with+CropData" target="_blank" class="gmail"><img src="/images/gmail-icon.svg" width="16px"></a><a href="https://mail.yahoo.com/d/search/keyword=Thank%2520You%2520for%2520Registering%2520with%2520CropData" target="_blank" class="yahoo"><img src="/images/yahoo-mail-icon.svg" width="16px"></a><a href="https://mail.rediff.com/cgi-bin/login.cgi" target="_blank" class="rediffmail"><img src="/images/rediffmail.svg" width="16px"></a><a href="https://mail.aol.com" target="_blank" class="aol"><img src="/images/aol-icon.svg" width="16px"></a><a href="https://outlook.live.com/mail" target="_blank" class="outlook"><img src="/images/outlook-icon.svg" width="16px"></a></div><a class="loginPopupBtn disabled">Login</a></div>');

                                    } else {
                                        $("#formModalMsg .modal-body").html('Thank you for registering with us. <br>Please check your email <b>(Inbox or Promotions)</b> &amp; press the <a type="button">click here</a> button to verify your email address.');
                                        $('#formModalMsg .modal-footer').html('<div class="mailPopupWindow w-100"><a type="button" class="btn btn-primary btn-sm checkMailBox" role="button"> ' + img + ' Open Your Mail</a><a class="loginPopupBtn disabled">Login</a></div>')
                                    }
                                    // showMessage('<div class="p-4">Thank you for registering with us. <br>Please check your email (Inbox or Promotions) &amp; click on the verification link sent from CropData.<br><a type="button" class="btn btn-primary btn-sm checkMailBox mt-2" role="button" style="margin: 0 auto;">Open Your Mail</a></div>', 30000000);


                                    $("#formModalMsg").modal('show');


                                    //check user status

                                    setInterval(function() {
                                        if (repeatTask == 'Yes') {
                                            checkUserStatus(mob, email);
                                        }
                                    }, 2000);


                                    //end 

                                    $('#buyerRegistrationForm input, #buyerRegistrationForm select').each(function() {
                                        $(this).attr('disabled', true);
                                    });

                                    $("#buyerRegistrationFormBtn").show();
                                    // window.location.href = '/agriota-user/verification.html?mob=' + mob + "&email=" + email;                                   

                                } else {
                                    showMessage(response.message);
                                    $("#buyerRegistrationFormBtn").show();
                                }
                            },
                            error: function(xhr, textStatus, errorThrown) {

                                loading.close();
                                $("#buyerRegistrationFormBtn").show();
                                showMessage(xhr.responseJSON.error);

                            },
                        });

                    } else {
                        var data = {
                            loginMobileNo: $("#loginMobileNo").val(),
                            loginOtp: $("#loginOtp").val(),
                        };

                        // Validate OTP
                        $.ajax({
                            type: "POST",
                            url: aefcBaseUrl + "/validateOTP",
                            // url: "http://192.168.0.50:8080/site/agriota-user/add",
                            contentType: "application/json; charset=utf-8",
                            data: JSON.stringify(data),
                            dataType: "json",
                            async: true,
                            beforeSend: function(xhr) {
                                loading.open();
                                $("#buyerLoginFormBtn").hide();
                                $("#formModalMsg .modal-body").empty();
                            },
                            success: function(response) {
                                if (response.status == true) {
                                    var otp = $('#loginOtp').val();

                                    if (otp == "") {
                                        $('.loginMobileNoField').hide();
                                        $('.loginOtpField').show();
                                        $("#buyerLoginFormBtn").show().val("Submit");
                                        timer(response.expiredTime);
                                        showMessage(response.message, 50000);
                                    } else {
                                        var mob = $("#loginMobileNo").val();

                                        if (response.authToken != undefined && response.authToken != "") {
                                            document.location.href = '/agriota-user/registration.html?jwt=' + response.authToken;
                                        } else {
                                            // if (mob != "" && email != "") {
                                            //     document.location.href = '/agriota-user/verification.html?mob=' + mob + '&email=' + email;
                                            // } else {
                                            //     document.location.href = '/agriota-user/verification.html?mob=' + mob + '&email=' + response.EmailId;
                                            //     // console.log("email or mobile is missing");
                                            // }

                                            if (response.IsEmailVerified == 'No') {
                                                showMessage('Your email address is not verified, please check your email for verification link', 1000000);
                                                $('.buyerRegistrationSection').addClass('disabled');
                                                $('.buyerLoginSection').addClass('disabled');
                                            }

                                        }
                                        $("#buyerLoginFormBtn").show();
                                    }
                                } else {
                                    showMessage(response.message, 50000);
                                    // $('.loginMobileNoField').show();
                                    // $('.loginOtpField, #resendOtp').hide();
                                    $('#loginOtp').val('');
                                    $("#buyerLoginFormBtn").show();
                                }
                            },
                            error: function(xhr, textStatus, errorThrown) {
                                loading.close();
                                $('.loginMobileNoField').show();
                                $('.loginOtpField').hide();
                                showMessage(xhr.responseJSON.error);
                            },
                        });

                    }

                },
            });

            if (jQuery().validate) {

                // registation form validation
                $("#buyerRegistrationForm").validate({
                    rules: {
                        companyName: {
                            required: true,
                            minlength: 2,
                        },
                        // natureOfBusiness: {
                        //     required: true,
                        // },
                        mobileNo: {
                            required: true,
                            minlength: 6,
                            maxlength: 15,
                            "mobileNoRegex": /^[\s0-9\+\-\(\)]+$/
                        },
                        mobileNoCountryCode: {
                            required: true,
                        },
                        email: {
                            email: true,
                            required: true,
                            maxlength: 100,
                        },
                        country: {
                            required: true,
                        }
                    },
                    messages: {
                        companyName: {
                            required: jQuery.format("Please Enter Your Company Name.")
                        },
                        mobileNo: {
                            required: jQuery.format("Please Enter Country Code & Mobile No.")
                        },
                        mobileNoCountryCode: {
                            required: jQuery.format('')
                        },
                        email: {
                            required: jQuery.format("Please Enter Email Address.")
                        },
                        country: {
                            required: jQuery.format("Please Enter Country Name.")
                        }
                    },
                });


                // Login form validation
                $("#buyerLoginForm").validate({
                    rules: {
                        loginMobileNo: {
                            required: true,
                            minlength: 6,
                            maxlength: 15,
                            "mobileNoRegex": /^[\s0-9\+\-\(\)]+$/
                        },

                        loginOtp: {
                            required: true,
                            minlength: 4,
                            maxlength: 4,
                        },
                    },
                    messages: {
                        loginMobileNo: {
                            required: jQuery.format("Please Enter Mobile No.")
                        },
                        loginOtp: {
                            required: jQuery.format("Please Enter OTP.")
                        }
                    },
                });
            }
        });
    </script>

</body>

</html>